<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golpes em Redes Sociais</title>
  <link rel="icon" type="image/png" href="./assets/icons/icon2.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      overflow-x: hidden;
    }

    body {
      background-image: url("assets/images/imageHD.jpg");
      background-size: cover;
      background-attachment: fixed;
      font-family: 'Poppins', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #333;
    }

    #menu-container {
      padding: 30px;
      border-radius: 40px;
      width: 690px;
      max-width: 100%;
      text-align: center;
      animation: slideIn 1s ease;
    }

    #menu-container h1 {
      font-family: 'Poppins', sans-serif;
      letter-spacing: 1px;
      margin-bottom: 15px;
      font-size: 1.5em;
      color: #ffffff;
    }

    .menu-icons {
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
    }

    .menu-item {
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      padding: 20px;
      border-radius: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      width: 180px;
    }

    .menu-item:hover {
      transform: scale(1.05);
    }

    .menu-item img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 50%;
    }

    .menu-item span {
      display: block;
      margin-top: 10px;
      font-size: 1em;
      font-weight: bold;
      color: #ffffff;
    }

    #scenario-container {
      display: none;
      background: linear-gradient(rgba(0, 0, 0, 0.2));
      backdrop-filter: blur(12px);
      padding: 40px;
      border-radius: 30px;
      width: 1200px;
      max-width: 100%;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: slideIn 1s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: background 0.5s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #scenario-description p {
      font-size: 1.1em;
      margin-bottom: 20px;
      color: #ffffff;
    }

    #score-display {
      font-size: 1.2em;
      color: #ffffff;
      margin-top: 10px;
      font-weight: bold;
    }

    #image-container img {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(255, 255, 255, 0.1);
    }

    #options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .option {
      flex: 1 1 30%;
      padding: 15px;
      font-size: 1em;
      border: none;
      border-radius: 15px;
      background-color: #ffffffa9;
      color: #000000;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      font-family: 'Poppins', sans-serif;
    }

    .option:hover {
      background-color: #ffffff;
      transform: translateY(-3px);
    }

    .option:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #restartBtn {
      width: 100%;
      padding: 15px;
      font-size: 1.2em;
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      background-color: #0166aa;
      color: #fff;
      font-family: 'Poppins', sans-serif;
    }

    #restartBtn:hover {
      background-color: #005b99;
      transform: scale(1.03);
    }

    @media (max-height: 600px) {
      body {
        background-color: #000000;
        align-items: flex-start;
        padding-top: 10px;
      }

      #menu-container {
        margin: 10px auto;
        padding: 15px;
        padding-top: 20px;
      }

      #scenario-container {
        margin: 10px auto;
        padding: 20px;
        padding-top: 20px;
        max-width: 85%;
      }

      #menu-container h1 {
        font-size: 1.3em;
        margin-bottom: 10px;
      }

      .menu-item {
        width: 160px;
        padding: 10px;
      }

      .menu-item img {
        width: 80px;
        height: 80px;
      }

      .menu-item span {
        font-size: 0.95em;
      }

      #scenario-description p {
        font-size: 0.9em;
      }

      .option {
        font-size: 0.8em;
        padding: 10px;
      }

      #restartBtn {
        font-size: 1em;
        padding: 10px;
      }
    }

    @media (max-width: 768px) {
      body {
        background-color: rgb(0, 0, 0);
      }

      #menu-container {
        padding: 15px;
        max-width: 90%;
        margin: 15px auto;
      }

      #scenario-container {
        padding: 20px;
        max-width: 95%;
      }

      #menu-container h1 {
        font-size: 1.4em;
        margin-bottom: 40px;
      }

      .menu-icons {
        display: flex;
        justify-content: space-around;
        align-items: center;
        flex-wrap: wrap;
        gap: 20px;
      }

      .menu-item {
        width: 170px;
        padding: 10px;
      }

      .menu-item img {
        width: 90px;
        height: 90px;
      }

      .menu-item span {
        font-size: 1.1em;
      }

      .option {
        flex: 1 1 100%;
        font-size: 0.9em;
        background-color: #ffffffd3;
      }

      .option:hover {
        background-color: #ffffffd3;
        transform: translateY(0px);
      }

      .option:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      #scenario-description p {
        font-size: 1em;
      }

      #restartBtn {
        font-size: 1em;
      }
    }

    @media (max-width: 400px) {
      body {
        background-color: blue;
      }

      #menu-container {
        padding: 10px;
        max-width: 80%;
      }

      #menu-container h1 {
        font-size: 1.2em;
        margin-bottom: 8px;
      }

      #scenario-container {
        padding: 20px;
        max-width: 95%;
      }

      .menu-icons {
        gap: 15px;
      }

      .menu-item {
        width: 150px;
        padding: 10px;
      }

      .menu-item img {
        width: 70px;
        height: 70px;
      }

      .menu-item span {
        font-size: 0.9em;
      }

      .option {
        flex: 1 1 100%;
        font-size: 0.8em;
        padding: 12px;
        background-color: #ffffffd3;
      }

      .option:hover {
        background-color: #ffffffd3;
        transform: translateY(0px);
      }

      #scenario-description p {
        font-size: 0.9em;
        margin-bottom: 10px;
      }

      #restartBtn {
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>
  <div id="menu-container">
    <h1>Selecione a Rede Social</h1>
    <div class="menu-icons">
      <div class="menu-item" onclick="menuItemClick('story1')" aria-label="Iniciar cenário de golpe por WhatsApp">
        <img src="assets/icons/whatsapp.png" alt="Golpe do WhatsApp">
        <span>WhatsApp</span>
      </div>
      <div class="menu-item" onclick="menuItemClick('story2')" aria-label="Iniciar cenário de golpe por Instagram">
        <img src="assets/icons/instagram.png" alt="Golpe pelo Instagram">
        <span>Instagram</span>
      </div>
      <div class="menu-item" onclick="menuItemClick('story3')" aria-label="Iniciar cenário de golpe por TikTok">
        <img src="assets/icons/tiktok.png" alt="Golpe por TikTok">
        <span>TikTok</span>
      </div>
    </div>
  </div>

  <div id="scenario-container" style="display: none;">
    <div id="score-display"></div>
    <div id="scenario-description"></div>
    <div id="image-container"></div>
    <div id="options"></div>
    <button id="restartBtn" style="display: none;" onclick="restartGame()" aria-label="Recomeçar o jogo">
      <i class="fas fa-redo"></i> Recomeçar
    </button>
  </div>

  <script>
    let menuClickSound, clickSound, clickSoundRestart;
    try {
      menuClickSound = new Howl({
        src: ['assets/sounds/som7.mp3'],
        volume: 0.3,
        preload: true,
        onloaderror: () => console.warn('Erro ao carregar som7.mp3')
      });
      clickSound = new Howl({
        src: ['assets/sounds/som8.mp3'],
        volume: 0.3,
        preload: true,
        onloaderror: () => console.warn('Erro ao carregar som8.mp3')
      });
      clickSoundRestart = new Howl({
        src: ['assets/sounds/som4.mp3'],
        volume: 0.3,
        preload: true,
        onloaderror: () => console.warn('Erro ao carregar som4.mp3')
      });
    } catch (e) {
      console.warn('Erro ao inicializar áudio', e);
    }

    let currentStoryParts = {};
    let currentPart = "";
    let cumulativeScore = 0;

    const emailStoryParts = {
      "start": {
        text: "Você recebe uma mensagem no WhatsApp de um contato que parece ser seu amigo, pedindo dinheiro urgente para uma emergência médica, com um link para transferência via Pix. Qual é sua ação?",
        image: "assets/images/whatsapp_urgent_message.jpg",
        options: [
          { id: "callFriend", text: "Ligar para confirmar com seu amigo", next: "verify1", points: 2 },
          { id: "sendMoney", text: "Clicar no link e enviar o dinheiro", next: "click1", points: 0 },
          { id: "ignoreMessage", text: "Ignorar a mensagem", next: "ignore1", points: 1 }
        ]
      },
      "ignore1": {
        text: "Você ignora a mensagem, mas recebe outra do mesmo número, agora com uma foto do seu 'amigo' em um hospital. O que você faz?",
        image: "assets/images/whatsapp_hospital_photo.jpg",
        options: [
          { id: "blockNumber", text: "Bloquear o número", next: "ignore_report", points: 2 },
          { id: "replyMessage", text: "Responder pedindo mais detalhes", next: "ignore2", points: 1 },
          { id: "doNothing", text: "Continuar ignorando", next: "endIgnore", points: 0 }
        ]
      },
      "ignore_report": {
        text: "Você bloqueia o número, mas recebe uma mensagem de outro número alegando ser um familiar, insistindo no pedido de dinheiro. Como proceder?",
        image: "assets/images/whatsapp_new_number.jpg",
        options: [
          { id: "verifyIdentity", text: "Verificar a identidade por chamada de vídeo", next: "ignore_expert", points: 2 },
          { id: "searchOnline", text: "Pesquisar sobre golpes de WhatsApp", next: "ignore_support", points: 1 },
          { id: "replyAgain", text: "Responder para esclarecer", next: "ignore2", points: 1 }
        ]
      },
      "ignore2": {
        text: "Ao responder, o contato envia um QR code para pagamento imediato, alegando urgência. Você nota que o número não está na sua lista de contatos. Qual é o próximo passo?",
        image: "assets/images/whatsapp_qr_code.jpg",
        options: [
          { id: "reportSpam", text: "Denunciar como spam no WhatsApp", next: "ignore_support", points: 1 },
          { id: "secureAccount", text: "Ativar verificação em duas etapas", next: "ignore3", points: 2 },
          { id: "ignoreAgain", text: "Ignorar e não responder", next: "endIgnore2", points: 0 }
        ]
      },
      "ignore3": {
        text: "Você ativa a verificação em duas etapas. O contato para de enviar mensagens, mas você recebe um alerta de tentativa de login no WhatsApp. O que fazer?",
        image: "assets/images/whatsapp_login_alert.jpg",
        options: [
          { id: "changePin", text: "Alterar o PIN de verificação", next: "endBetterIgnore", points: 2 },
          { id: "monitorActivity", text: "Monitorar atividades no aplicativo", next: "endMonitor", points: 1 },
          { id: "ignoreAlert", text: "Ignorar o alerta", next: "endRelax", points: 0 }
        ]
      },
      "ignore_expert": {
        text: "A chamada de vídeo confirma que era um golpe. Sua ação de verificar a identidade protegeu suas finanças. Continue usando chamadas para confirmar contatos suspeitos.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "ignore_support": {
        text: "Sua pesquisa revela que o golpe de 'falso amigo' é comum no WhatsApp. Você evitou a armadilha, mas mantenha a verificação em duas etapas ativa.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endIgnore": {
        text: "Ignorar as mensagens permitiu que o golpista continuasse enviando pedidos a seus contatos, usando seu nome. Sempre confirme a identidade de contatos suspeitos.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endIgnore2": {
        text: "Ignorar o QR code não evitou tentativas de login na sua conta. Os golpistas conseguiram acesso parcial. Sempre denuncie mensagens suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endMonitor": {
        text: "Monitorar a atividade ajudou a detectar o golpe, mas sem alterar o PIN, sua conta ficou vulnerável. Ative a verificação em duas etapas.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endRelax": {
        text: "Ignorar o alerta permitiu que os golpistas acessassem sua conta e enviassem mensagens falsas. Sempre reaja a alertas de segurança.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endBetterIgnore": {
        text: "Parabéns! Alterar o PIN e usar verificação em duas etapas protegeu sua conta. Continue verificando contatos suspeitos por chamada.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "click1": {
        text: "Clicar no link levou a uma página falsa de Pix, e seus dados bancários foram roubados. Nunca clique em links de mensagens suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "verify1": {
        text: "Você liga para seu amigo, que confirma não ter enviado a mensagem. O WhatsApp notifica uma tentativa de login em outro dispositivo. O que fazer?",
        image: "assets/images/whatsapp_login_alert.jpg",
        options: [
          { id: "secureAccount", text: "Ativar verificação em duas etapas", next: "verify2", points: 2 },
          { id: "contactSupport", text: "Denunciar ao suporte do WhatsApp", next: "endVerifyConsult", points: 1 },
          { id: "ignoreAlert", text: "Ignorar o alerta", next: "endVerifyIgnore", points: 0 }
        ]
      },
      "verify2": {
        text: "Com a verificação em duas etapas ativa, você recebe outra mensagem de um número diferente, pedindo para compartilhar seu código de verificação. Como proceder?",
        image: "assets/images/whatsapp_code_request.jpg",
        options: [
          { id: "reportMessage", text: "Denunciar a mensagem como spam", next: "endVerifySoftUpdate", points: 2 },
          { id: "shareCode", text: "Compartilhar o código", next: "endVerifyPassword", points: 0 },
          { id: "checkSettings", text: "Verificar configurações de segurança", next: "verify2a", points: 1 }
        ]
      },
      "verify2a": {
        text: "Nas configurações, você confirma que a verificação em duas etapas está ativa, mas o número continua enviando mensagens. O que fazer?",
        image: "assets/images/whatsapp_settings.jpg",
        options: [
          { id: "blockNumber", text: "Bloquear o número", next: "endVerifySoftUpdate", points: 2 },
          { id: "monitorActivity", text: "Monitorar atividades", next: "endVerifyMonitor", points: 1 },
          { id: "doNothing", text: "Ignorar as mensagens", next: "endVerifyIgnore", points: 0 }
        ]
      },
      "verify2b": {
        text: "Você usa uma ferramenta antiphishing e descobre que o número é falso. O WhatsApp alerta sobre outra tentativa de login. Qual o próximo passo?",
        image: "assets/images/whatsapp_login_alert.jpg",
        options: [
          { id: "changePin", text: "Alterar o PIN de verificação", next: "endVerifyReset", points: 2 },
          { id: "contactSupport", text: "Contactar o suporte do WhatsApp", next: "endVerifyConsult", points: 1 },
          { id: "ignoreSigns", text: "Ignorar os alertas", next: "endVerifyIgnore", points: 0 }
        ]
      },
      "endVerifyDelete": {
        text: "Ignorar as mensagens pareceu resolver, mas sua conta foi comprometida. Sempre confirme a identidade de contatos suspeitos.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endVerifyIgnore": {
        text: "Ignorar os alertas permitiu que golpistas acessassem sua conta. Sempre verifique atividades suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endVerifyMonitor": {
        text: "Monitorar a atividade detectou o golpe, mas sem medidas adicionais, sua conta ficou vulnerável. Ative a verificação em duas etapas.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifySoftUpdate": {
        text: "Denunciar e bloquear o número protegeu sua conta. Continue verificando mensagens suspeitas.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endVerifyPassword": {
        text: "Compartilhar o código permitiu que golpistas acessassem sua conta. Nunca compartilhe códigos de verificação.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endVerifyConsult": {
        text: "Contactar o suporte confirmou o golpe. Sua conta está segura, mas mantenha a vigilância.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endVerifyReset": {
        text: "Alterar o PIN bloqueou os golpistas. Continue usando senhas fortes e verificação em duas etapas.",
        image: "assets/images/good_end.jpg",
        options: []
      }
    };

    const instagramStoryParts = {
      "start": {
        text: "Você vê um Story de uma marca famosa no Instagram oferecendo um sorteio de produtos grátis. O Story pede para clicar em um link e preencher um formulário. Como você reage?",
        image: "assets/images/instagram_story.jpg",
        options: [
          { id: "checkProfile", text: "Verificar o perfil da marca", next: "i_verify1", points: 2 },
          { id: "clickLink", text: "Clicar no link do Story", next: "i_click1", points: 0 },
          { id: "ignoreStory", text: "Ignorar o Story", next: "i_ignore1", points: 1 }
        ]
      },
      "i_ignore1": {
        text: "Você ignora o Story, mas recebe uma DM da mesma conta, pedindo para confirmar sua participação no sorteio. A mensagem parece oficial. O que fazer?",
        image: "assets/images/instagram_dm.jpg",
        options: [
          { id: "reportProfile", text: "Denunciar o perfil como falso", next: "i_ignore_report", points: 2 },
          { id: "checkDM", text: "Verificar a mensagem", next: "i_ignore2", points: 1 },
          { id: "ignoreDM", text: "Ignorar a mensagem", next: "i_endIgnore", points: 0 }
        ]
      },
      "i_ignore_report": {
        text: "Você denuncia o perfil, mas um novo Story aparece de outra conta similar, prometendo um prêmio maior. Como proceder?",
        image: "assets/images/instagram_new_story.jpg",
        options: [
          { id: "checkOfficial", text: "Verificar o site oficial da marca", next: "i_ignore_support", points: 2 },
          { id: "blockAccount", text: "Bloquear a nova conta", next: "i_ignore2", points: 1 },
          { id: "clickNewLink", text: "Clicar no novo link", next: "i_endIgnore2", points: 0 }
        ]
      },
      "i_ignore2": {
        text: "Ao verificar a DM, você nota que o link leva a um site com erros de design. O Instagram alerta sobre uma tentativa de login. O que fazer?",
        image: "assets/images/instagram_login_alert.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "i_ignore3", points: 2 },
          { id: "reportDM", text: "Denunciar a DM como spam", next: "i_ignore_support", points: 1 },
          { id: "ignoreAlerts", text: "Ignorar o alerta", next: "i_endIgnore2", points: 0 }
        ]
      },
      "i_ignore3": {
        text: "Com o 2FA ativo, você bloqueia uma tentativa de login. Outro Story aparece, pedindo para atualizar suas informações de pagamento. O que fazer?",
        image: "assets/images/instagram_payment.jpg",
        options: [
          { id: "ignoreStory", text: "Ignorar o Story", next: "i_endBetterIgnore", points: 2 },
          { id: "checkSettings", text: "Verificar configurações de segurança", next: "i_ignore4", points: 1 },
          { id: "updateInfo", text: "Atualizar as informações", next: "i_endIgnore2", points: 0 }
        ]
      },
      "i_ignore4": {
        text: "Você verifica as configurações e nota uma tentativa de login bloqueada. Um email 'do Instagram' pede para desativar o 2FA. Como proceder?",
        image: "assets/images/instagram_email.jpg",
        options: [
          { id: "ignoreEmail", text: "Ignorar o email", next: "i_endBetterIgnore", points: 2 },
          { id: "contactSupport", text: "Contactar o suporte do Instagram", next: "i_ignore_support", points: 1 },
          { id: "disable2FA", text: "Desativar o 2FA", next: "i_endIgnore2", points: 0 }
        ]
      },
      "i_ignore_support": {
        text: "Você descobre que o sorteio era um golpe comum no Instagram. Continue verificando Stories e DMs suspeitos.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "i_endIgnore": {
        text: "Ignorar as mensagens permitiu que golpistas continuassem enviando links falsos aos seus seguidores. Sempre denuncie perfis suspeitos.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "i_endIgnore2": {
        text: "Clicar no link ou ignorar alertas comprometeu sua conta. Os golpistas postaram Stories falsos. Verifique sempre atividades suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "i_endBetterIgnore": {
        text: "Parabéns! Ignorar Stories suspeitos e manter o 2FA ativo protegeu sua conta. Continue verificando perfis antes de clicar.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "i_endModerateIgnore": {
        text: "Bloquear a conta ajudou, mas sem 2FA, sua conta permanece vulnerável. Ative a autenticação de dois fatores.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "i_click1": {
        text: "Clicar no link do Story levou a um formulário pedindo seus dados pessoais. O site parece falso. O que fazer?",
        image: "assets/images/instagram_fake_form.jpg",
        options: [
          { id: "closeForm", text: "Fechar o formulário e denunciar", next: "i_click3", points: 2 },
          { id: "fillForm", text: "Preencher o formulário", next: "i_click4", points: 0 },
          { id: "checkSettings", text: "Verificar configurações de segurança", next: "i_click2", points: 1 }
        ]
      },
      "i_click2": {
        text: "Você verifica as configurações e nota uma tentativa de login. A conta falsa continua enviando DMs. O que fazer?",
        image: "assets/images/instagram_login_alert.jpg",
        options: [
          { id: "enable2FA", text: "Ativar 2FA e mudar senha", next: "i_endVerifySafe", points: 2 },
          { id: "blockAccount", text: "Bloquear a conta", next: "i_click3", points: 1 },
          { id: "ignoreDMs", text: "Ignorar as DMs", next: "i_endIgnore", points: 0 }
        ]
      },
      "i_click3": {
        text: "Denunciar o perfil evitou o golpe. Sua conta está segura, mas continue verificando Stories suspeitos.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "i_click4": {
        text: "Preencher o formulário comprometeu seus dados. Nunca insira informações pessoais em links de Stories suspeitos.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "i_verify1": {
        text: "Você verifica o perfil e nota que ele não tem o selo de verificação e usa fotos genéricas. O que fazer?",
        image: "assets/images/instagram_fake_profile.jpg",
        options: [
          { id: "reportProfile", text: "Denunciar e bloquear o perfil", next: "i_verify2", points: 2 },
          { id: "checkWebsite", text: "Visitar o site oficial da marca", next: "i_verify3", points: 1 },
          { id: "contactSupport", text: "Contactar o suporte do Instagram", next: "i_verify4", points: 2 }
        ]
      },
      "i_verify2": {
        text: "Denunciar o perfil evitou o golpe. Continue verificando perfis antes de interagir com Stories.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "i_verify3": {
        text: "O site oficial confirma que o sorteio é falso. Você recebe outra DM pedindo para confirmar sua identidade. O que fazer?",
        image: "assets/images/instagram_dm.jpg",
        options: [
          { id: "enable2FA", text: "Ativar 2FA e mudar senha", next: "i_endVerifySafe", points: 2 },
          { id: "reportDM", text: "Denunciar a DM", next: "i_ignore_support", points: 1 },
          { id: "ignoreDM", text: "Ignorar a mensagem", next: "i_endModerateIgnore", points: 1 }
        ]
      },
      "i_verify4": {
        text: "O suporte confirma que o perfil é falso. Como proteger sua conta agora?",
        image: "assets/images/instagram_settings.jpg",
        options: [
          { id: "enable2FA", text: "Ativar 2FA e mudar senha", next: "i_endVerifySafe", points: 2 },
          { id: "monitor", text: "Monitorar atividades da conta", next: "i_endModerateIgnore", points: 1 },
          { id: "ignore", text: "Ignorar e continuar normalmente", next: "i_endIgnore", points: 0 }
        ]
      },
      "i_endVerifySafe": {
        text: "Ativar 2FA e mudar a senha protegeu sua conta. Continue verificando Stories e perfis suspeitos.",
        image: "assets/images/good_end.jpg",
        options: []
      }
    };

    const tiktokStoryParts = {
      "start": {
        text: "Você recebe uma DM no TikTok de um perfil viral convidando você para um 'desafio' que promete ganhar seguidores. A mensagem pede para gravar um vídeo e enviar via link. Como você reage?",
        image: "assets/images/tiktok_challenge.jpg",
        options: [
          { id: "verifyProfile", text: "Verificar o perfil que enviou a DM", next: "t_verify1", points: 2 },
          { id: "recordVideo", text: "Gravar e enviar o vídeo", next: "t_click1", points: 0 },
          { id: "ignoreMessage", text: "Ignorar a mensagem", next: "t_ignore1", points: 1 }
        ]
      },
      "t_ignore1": {
        text: "Você ignora a DM, mas o perfil posta um vídeo marcando você, pedindo para participar do desafio. O vídeo tem muitos likes. O que fazer?",
        image: "assets/images/tiktok_viral_video.jpg",
        options: [
          { id: "reportVideo", text: "Denunciar o vídeo como spam", next: "t_ignore_report", points: 2 },
          { id: "checkVideo", text: "Verificar os comentários do vídeo", next: "t_ignore2", points: 1 },
          { id: "ignoreVideo", text: "Ignorar o vídeo", next: "t_endIgnore", points: 0 }
        ]
      },
      "t_ignore_report": {
        text: "Você denuncia o vídeo, mas recebe outra DM de um perfil diferente, insistindo no desafio com um novo link. Como proceder?",
        image: "assets/images/tiktok_new_dm.jpg",
        options: [
          { id: "checkSettings", text: "Verificar configurações de segurança", next: "t_ignore2", points: 1 },
          { id: "contactSupport", text: "Contactar o suporte do TikTok", next: "t_ignore_support", points: 2 },
          { id: "clickLink", text: "Clicar no novo link", next: "t_endIgnore2", points: 0 }
        ]
      },
      "t_ignore2": {
        text: "Você verifica os comentários e nota que outros usuários relatam o desafio como suspeito. Um email do TikTok alerta sobre uma tentativa de login. O que fazer?",
        image: "assets/images/tiktok_login_alert.jpg",
        options: [
          { id: "changePassword", text: "Mudar a senha imediatamente", next: "t_ignore3", points: 2 },
          { id: "checkComments", text: "Continuar investigando comentários", next: "t_ignore_support", points: 1 },
          { id: "ignoreAlerts", text: "Ignorar o alerta", next: "t_endIgnore2", points: 0 }
        ]
      },
      "t_ignore3": {
        text: "Você muda a senha, mas outro vídeo marcando você aparece, pedindo para compartilhar dados pessoais no link. O que fazer?",
        image: "assets/images/tiktok_new_video.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "t_ignore4", points: 2 },
          { id: "reportVideo", text: "Denunciar o novo vídeo", next: "t_verify2", points: 1 },
          { id: "ignoreVideo", text: "Ignorar o vídeo", next: "t_end_verify_moderate", points: 1 }
        ]
      },
      "t_ignore4": {
        text: "Com o 2FA ativo, você bloqueia uma tentativa de login. Um email 'do TikTok' pede para desativar o 2FA para 'atualizar a conta'. O que fazer?",
        image: "assets/images/tiktok_email.jpg",
        options: [
          { id: "ignoreEmail", text: "Ignorar o email", next: "t_endVerifyRefresh", points: 2 },
          { id: "contactSupport", text: "Contactar o suporte do TikTok", next: "t_ignore_support", points: 1 },
          { id: "disable2FA", text: "Desativar o 2FA", next: "t_endIgnore2", points: 0 }
        ]
      },
      "t_ignore_support": {
        text: "Você descobre que o desafio era um golpe para roubar dados. Continue verificando vídeos e DMs antes de interagir.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "t_endIgnore": {
        text: "Ignorar o vídeo permitiu que golpistas continuassem marcando você, enganando seus seguidores. Sempre denuncie conteúdo suspeito.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_endIgnore2": {
        text: "Ignorar alertas ou clicar no link comprometeu sua conta. Os golpistas postaram vídeos falsos. Verifique sempre atividades suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_endBetterIgnore": {
        text: "Parabéns! Denunciar o vídeo e proteger sua conta evitou o golpe. Continue verificando conteúdos suspeitos.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "t_click1": {
        text: "Enviar o vídeo pelo link levou a um site que roubou suas credenciais. Nunca envie vídeos por links suspeitos.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_click2": {
        text: "Você interage com o perfil, que pede mais vídeos para 'validar' sua participação. O que fazer?",
        image: "assets/images/tiktok_new_video.jpg",
        options: [
          { id: "stopInteraction", text: "Parar de interagir e denunciar", next: "t_verify2", points: 2 },
          { id: "sendMore", text: "Enviar outro vídeo", next: "t_click1", points: 0 },
          { id: "checkSettings", text: "Verificar configurações de segurança", next: "t_click3", points: 1 }
        ]
      },
      "t_click3": {
        text: "Você verifica as configurações e nota tentativas de login. O perfil continua enviando DMs. O que fazer?",
        image: "assets/images/tiktok_login_alert.jpg",
        options: [
          { id: "enable2FA", text: "Ativar 2FA e mudar senha", next: "t_endVerifyRefresh", points: 2 },
          { id: "monitor", text: "Monitorar atividades da conta", next: "t_end_verify_moderate", points: 1 },
          { id: "ignore", text: "Ignorar as mensagens", next: "t_endVerify", points: 0 }
        ]
      },
      "t_verify1": {
        text: "Você verifica o perfil e nota que os vídeos são genéricos e os comentários parecem automatizados. O que fazer?",
        image: "assets/images/tiktok_fake_profile.jpg",
        options: [
          { id: "reportProfile", text: "Denunciar e bloquear o perfil", next: "t_verify2", points: 2 },
          { id: "checkSettings", text: "Verificar configurações de segurança", next: "t_verify3", points: 1 },
          { id: "contactFriend", text: "Avisar amigos sobre o perfil", next: "t_verify4", points: 2 }
        ]
      },
      "t_verify2": {
        text: "Denunciar o perfil evitou o golpe. Continue verificando perfis antes de participar de desafios.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "t_verify3": {
        text: "Você verifica as configurações e nota que sua senha está segura. Outro vídeo marca você, pedindo para compartilhar dados. O que fazer?",
        image: "assets/images/tiktok_new_video.jpg",
        options: [
          { id: "enable2FA", text: "Ativar 2FA e mudar senha", next: "t_endVerifyRefresh", points: 2 },
          { id: "reportVideo", text: "Denunciar o vídeo", next: "t_ignore_support", points: 1 },
          { id: "ignoreVideo", text: "Ignorar o vídeo", next: "t_endVerify", points: 0 }
        ]
      },
      "t_verify4": {
        text: "Você avisa seus amigos, que confirmam receber DMs suspeitas. Como proteger sua conta agora?",
        image: "assets/images/tiktok_settings.jpg",
        options: [
          { id: "enable2FA", text: "Ativar 2FA e mudar senha", next: "t_endVerifyRefresh", points: 2 },
          { id: "monitor", text: "Monitorar atividades da conta", next: "t_end_verify_moderate", points: 1 },
          { id: "ignore", text: "Ignorar e continuar normalmente", next: "t_endVerify", points: 0 }
        ]
      },
      "t_endVerifyRefresh": {
        text: "Ativar 2FA e mudar a senha protegeu sua conta. Continue verificando vídeos e DMs suspeitos.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "t_endVerify": {
        text: "Ignorar os sinais permitiu que golpistas acessassem sua conta. Sempre verifique atividades suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_end_verify_moderate": {
        text: "Monitorar a conta ajudou, mas sem 2FA, sua conta permanece vulnerável. Ative a autenticação de dois fatores.",
        image: "assets/images/medium_end.jpg",
        options: []
      }
    };

    function menuItemClick(storyKey) {
      if (menuClickSound) menuClickSound.play();
      startStory(storyKey);
    }

    function startStory(storyKey) {
      cumulativeScore = 0;
      currentPart = "start";
      if (storyKey === "story1") {
        currentStoryParts = emailStoryParts;
      } else if (storyKey === "story2") {
        currentStoryParts = instagramStoryParts;
      } else if (storyKey === "story3") {
        currentStoryParts = tiktokStoryParts;
      } else {
        console.warn('História inválida:', storyKey);
        return;
      }
      document.getElementById("menu-container").style.display = "none";
      document.getElementById("scenario-container").style.display = "block";
      document.body.style.backgroundImage = "url('assets/images/imageHD.jpg')";
      loadPart();
    }

    function loadPart() {
      const part = currentStoryParts[currentPart];
      if (!part) {
        console.warn('Parte do cenário não encontrado:', currentPart);
        document.getElementById("score-display").innerHTML = "";
        document.getElementById("scenario-description").innerHTML = "<p>Erro: Cenário não encontrado.</p>";
        document.getElementById("image-container").innerHTML = "";
        document.getElementById("options").innerHTML = "";
        document.getElementById("restartBtn").style.display = "block";
        return;
      }
      
      if (part.options.length === 0) {
        document.getElementById("scenario-description").innerHTML = `<p>${part.text}</p><p id="score-display">Pontuação Final: ${cumulativeScore} pontos</p>`;
      } else {
        document.getElementById("scenario-description").innerHTML = `<p>${part.text}</p>`;
        document.getElementById("score-display").innerHTML = "";
      }

      document.getElementById("image-container").innerHTML = part.image
        ? `<img src="${part.image}" alt="Imagem do cenário" onerror="this.src='assets/images/medium_end.jpg'">`
        : "";

      if (part.image === "assets/images/bad_end.jpg") {
        document.body.style.backgroundImage = "url('assets/images/image2.jpg')";
      } else if (part.image === "assets/images/good_end.jpg") {
        document.body.style.backgroundImage = "url('assets/images/image3.jpg')";
      } else {
        document.body.style.backgroundImage = "url('assets/images/imageHD.jpg')";
      }

      const optionsContainer = document.getElementById("options");
      optionsContainer.innerHTML = "";
      if (part.options.length === 0) {
        document.getElementById("restartBtn").style.display = "block";
      } else {
        document.getElementById("restartBtn").style.display = "none";
        part.options.forEach(option => {
          let btn = document.createElement("button");
          btn.className = "option";
          btn.innerText = option.text;
          btn.setAttribute("aria-label", `Opção: ${option.text}`);
          btn.addEventListener("click", function() {
            if (clickSound) clickSound.play();
            cumulativeScore += option.points;
            currentPart = option.next;
            loadPart();
          });
          optionsContainer.appendChild(btn);
        });
      }
    }

    function restartGame() {
      if (clickSoundRestart) clickSoundRestart.play();
      document.getElementById("scenario-container").style.display = "none";
      document.getElementById("menu-container").style.display = "block";
      document.getElementById("score-display").innerHTML = "";
      document.getElementById("scenario-description").textContent = "";
      document.body.style.backgroundImage = "url('assets/images/imageHD.jpg')";
      cumulativeScore = 0;
      currentPart = "";
      currentStoryParts = {};
    }
  </script>
</body>
</html>
