<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>História Interativa - Golpe do E-mail</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-o8CMBG1aWBb+mHuDgvk1XSqLzKvXl+MbB9RlN2mvFZJG1Io3y6n+xJcG8RbaKPHMB8/5Eo3odWucI+fO5P/O7Q=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      background: linear-gradient(90deg, #2f5772, #28538f);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: #333;
    }
    #menu-container {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      width: 700px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      animation: fadeInMenu 0.8s ease;
    }
    @keyframes fadeInMenu {
      from { opacity: 0; transform: translateY(-20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    #menu-container h1 {
      margin-bottom: 20px;
      font-size: 1.8em;
      color: #007acc;
    }
    .menu-icons {
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }
    .menu-item {
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .menu-item:hover { transform: scale(1.05); }
    .menu-item img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 50%;
      border: 3px solid #ffffff;
    }
    .menu-item span {
      display: block;
      margin-top: 10px;
      font-size: 1.2em;
      font-weight: bold;
      color: #007acc;
    }
    #scenario-container {
      display: none;
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      width: 1000px;
      max-width: 100%;
      text-align: center;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      animation: fadeInScenario 0.8s ease-in-out;
      margin-top: 20px;
    }
    @keyframes fadeInScenario {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    #scenario-progress { font-weight: bold; margin-bottom: 15px; font-size: 1.1em; }
    #scenario-description p { font-size: 1.1em; margin-bottom: 20px; }
    #image-container img {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    #options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }
    .option {
      flex: 1 1 0%;
      padding: 15px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      background-color: #d3d3d3;
      color: #333;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
    }
    .option:hover {
      background-color: #c0c0c0;
      transform: translateY(-3px);
    }
    button:disabled { opacity: 0.6; cursor: not-allowed; }
    #restartBtn {
      width: 100%;
      padding: 15px;
      font-size: 1.2em;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      background-color: #007acc;
      color: #fff;
    }
    #restartBtn:hover {
      background-color: #005b99;
      transform: scale(1.03);
    }
  </style>
</head>
<body>

  <div id="menu-container">
    <h1><i class="fas fa-book-open"></i> Escolha o Cenário</h1>
    <div class="menu-icons">
      <div class="menu-item" onclick="menuItemClick('story1')">
        <img src="icones/gmail2.png" alt="Golpe do E-mail">
        <span>Golpe do E-mail</span>
      </div>
    </div>
  </div>
  
  <div id="scenario-container">
    <div id="scenario-progress"></div>
    <div id="scenario-description"></div>
    <div id="image-container"></div>
    <div id="options"></div>
    <button id="restartBtn" style="display: none;" onclick="restartGame()">
      <i class="fas fa-redo"></i> Recomeçar
    </button>
  </div>
  
  <script>
    var menuClickSound = new Howl({
      src: ['sons/click2.mp3'],
      volume: 0.5,
      preload: true
    });
    var clickSound = new Howl({
      src: ['sons/click.mp3'],
      volume: 0.5,
      preload: true
    });
    
    function menuItemClick(storyKey) {
      menuClickSound.play();
      startStory(storyKey);
    }
    
    const story1Parts = [
      {
        part: 1,
        text: "Você recebe um e-mail alarmante: uma mensagem suspeita indica que sua conta pessoal pode ter sido comprometida. Qual é a sua ação?",
        image: "imagens/imagem_gmail1.jpg",
        options: {
          medium: { text: "Ignorar o e-mail", points: 1 },
          bad: { text: "Clicar no link", points: 0 },
          good: { text: "Verificar o e-mail", points: 2 }
        }
      },
      {
        part: 2,
        texts: {
          good: "Ao verificar o e-mail, você se depara com erros sutis: o remetente está mal formatado e os links parecem suspeitos. Você percebe que talvez seja uma tentativa de golpe",
          medium: "Mesmo que tenha ignorado inicialmente, seu celular logo exibe uma notificação de atividade estranha",
          bad: "Depois de clicar, seu sistema começa a apresentar lentidão e pop-ups estranhos"
        },
        images: {
          good: "imagens/imagem_gmail2.jpg",
          medium: "imagens/imagem_celular.jpg",
          bad: "imagens/imagem_error.jpg"
        },
        options: {
          medium: { text: "Verificar o histórico de acessos", points: 1 },
          good: { text: "Fazer uma varredura completa nas contas e trocar todas as senhas", points: 2 },
          bad: { text: "Tentar reiniciar o dispositivo", points: 0 }
        }
      },
      {
        part: 3,
        texts: {
          good: "Sua investigação confirma a tentativa de invasão embora a ameaça não tenha se materializado, o risco está presente. Você resolve fortalecer sua proteção imediatamente.",
          medium: "Você descobre que houve um acesso não autorizado, mas os danos parecem mínimos. Mesmo assim, esse episódio o deixa alerta para agir melhor.",
          bad: "O malware se espalha rapidamente, comprometendo informações e prejudicando o desempenho do seu sistema. A situação é crítica."
        },
        images: {
          good: "imagens/imagem_senha.jpg",
          medium: "imagens/imagem_sus.jpg",
          bad: "imagens/imagem_virusforte.jpg"
        },
        options: {
          bad: { text: "Desligar o dispositivo e tentar resolver sozinho", points: 0 },
          medium: { text: "Revisar  suas configurações de segurança sem se importar muito", points: 1 },
          good: { text: "Ativar autenticação de dois fatores e renovar suas senhas", points: 2 }
        }
      },
      {
        part: 4,
        texts: {
          good: "Determinado a não repetir o erro, você ativa a autenticação de dois fatores e renovar suas senhas",
          medium: "Você adota algumas medidas, mas sabe que ainda há vulnerabilidades que podem ser exploradas.",
          bad: "Sua proteção se deteriora rapidamente seu sistema apresenta falhas e você se sente impotente diante da situação."
        },
        images: {
          good: "imagens/imagem_2fa.jpg",
          medium: "imagens/imagem_vulnerabilidade.png",
          bad: "imagens/imagem_virusmuitoforte.jpg"
        },
        options: {
          good: { text: "Fazer backup e agendar para caso urgente", points: 2 },
          bad: { text: "Chorar", points: 0 },
          medium: { text: "Verificar apenas as contas importantes se esquecendo do resto", points: 1 },
        }
      },
    ];
    
    let choices = [];
    let currentPartIndex = 0;
    let cumulativeScore = 0;
    
    function startStory(storyKey) {
      if (storyKey === "story1") {
        choices = [];
        currentPartIndex = 0;
        cumulativeScore = 0;
        document.getElementById("menu-container").style.display = "none";
        document.getElementById("scenario-container").style.display = "block";
        loadPart();
      }
    }
    
    function loadPart() {
      if (currentPartIndex < story1Parts.length) {
        const part = story1Parts[currentPartIndex];
        if (currentPartIndex === 0) {
          document.getElementById("scenario-description").innerHTML = `<p>${part.text}</p>`;
          document.getElementById("image-container").innerHTML = `<img src="${part.image}" alt="Imagem da Parte ${part.part}">`;
        } else {
          let prevChoice = choices[currentPartIndex - 1];
          const textToShow = (part.texts && part.texts[prevChoice]) || "Texto não definido";
          const imageToShow = (part.images && part.images[prevChoice]) || "imagens/teste.png";
          document.getElementById("scenario-description").innerHTML = `<p>${textToShow}</p>`;
          document.getElementById("image-container").innerHTML = `<img src="${imageToShow}" alt="Imagem da Parte ${part.part}">`;
        }
        const optionsContainer = document.getElementById("options");
        optionsContainer.innerHTML = "";
        Object.keys(part.options).forEach(key => {
          const opt = part.options[key];
          let btn = document.createElement("button");
          btn.className = "option";
          btn.innerText = opt.text;
          btn.addEventListener("click", function() {
            clickSound.play();
            choices.push(key);
            cumulativeScore += opt.points;
            currentPartIndex++;
            loadPart();
          });
          optionsContainer.appendChild(btn);
        });
        document.getElementById("restartBtn").style.display = "none";
      } else {
        showFinal();
      }
    }
    
    function getFinalOutcome(score) {
      if (score >= 8) {
        return {
          text: "Parabéns! Suas decisões cuidadosas protegeram sua conta de possíveis fraudes. Ao verificar a autenticidade do e-mail e reforçar suas medidas de segurança, você garantiu a proteção dos seus dados pessoais.",
          image: "imagens/good_end.jpg"
        };
      } else if (score >= 4) {
        return {
          text: "Você evitou o pior, mas suas ações deixaram algumas brechas de segurança. Para evitar problemas no futuro, considere adotar práticas mais robustas, como verificar sempre a origem de mensagens e ativar autenticação de dois fatores.",
          image: "imagens/medium_end.jpg"
        };
      } else {
        return {
          text: "Infelizmente, suas escolhas levaram ao comprometimento dos seus dados. Hackers podem ter acesso às suas informações pessoais, o que pode resultar em sérias consequências para você.",
          image: "imagens/bad_end.jpg"
        };
      }
    }
    
    function showFinal() {
      const outcome = getFinalOutcome(cumulativeScore);
      document.getElementById("scenario-description").innerHTML = `<p>${outcome.text}</p>`;
      document.getElementById("image-container").innerHTML = `<img src="${outcome.image}" alt="Tela Final">`;
      document.getElementById("options").innerHTML = "";
      document.getElementById("restartBtn").style.display = "block";
    }

    function restartGame() {
      document.getElementById("scenario-container").style.display = "none";
      document.getElementById("menu-container").style.display = "block";
    }

  </script>
</body>
</html>