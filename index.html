<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>História Interativa - Golpes</title>
  <link rel="icon" type="image/png" href="./assets/icons/icon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      background-image: url("assets/images/image.jpg");
      background-size: cover;
      font-family: 'Poppins', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      color: #333;
    }

    #menu-container {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      padding: 30px;
      border-radius: 40px;
      width: 540px;
      max-width: 100%;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.2);
      animation: slideIn 1s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    @keyframes fadeInMenu {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #menu-container h1 {
      margin-bottom: 20px;
      font-size: 1.6em;
      color: #ffffff;
    }

    .menu-icons {
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
      gap: 0px;
    }

    .menu-item {
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .menu-item:hover {
      transform: scale(1.05);
    }

    .menu-item img {
      width: 110px;
      height: 110px;
      object-fit: cover;
      border-radius: 50%;
    }

    .menu-item span {
      display: block;
      margin-top: 10px;
      font-size: 1.1em;
      font-weight: bold;
      color: #ffffff;
    }

    #scenario-container {
      display: none;
      background: linear-gradient(rgba(0, 0, 0, 0.2));
      backdrop-filter: blur(12px);
      padding: 40px;
      border-radius: 30px;
      width: 1200px;
      max-width: 90%;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: slideIn 1s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: background 0.5s ease;
    }

    @keyframes fadeInScenario {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #scenario-description p {
      font-size: 1.1em;
      margin-bottom: 20px;
      color: #ffffff;
    }

    #image-container img {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(255, 255, 255, 0.1);
    }

    #options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .option {
      flex: 1 1 30%;
      padding: 15px;
      font-size: 1em;
      border: none;
      border-radius: 15px;
      background-color: #ffffff91;
      color: #000000;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      font-family: 'Poppins', sans-serif;
    }

    .option:hover {
      background-color: #ffffff;
      transform: translateY(-3px);
    }

    .option:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #restartBtn {
      width: 100%;
      padding: 15px;
      font-size: 1.2em;
      border: none;
      border-radius: 20px;
      margin-top: 20px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      background-color: #0166aa;
      color: #fff;
    }

    #restartBtn:hover {
      background-color: #005b99;
      transform: scale(1.03);
    }

    @media (max-width: 768px) {
      #menu-container, #scenario-container {
        padding: 20px;
        width: 100%;
      }

      #menu-container h1 {
        font-size: 1.6em;
      }

      .menu-item img {
        width: 120px;
        height: 120px;
      }

      .menu-item span {
        font-size: 1em;
      }

      .option {
        flex: 1 1 100%;
        font-size: 0.9em;
      }

      #scenario-description p {
        font-size: 1em;
      }

      #restartBtn {
        font-size: 1em;
      }
    }
  </style>
</head>

<body>
  <div id="menu-container">
    <h1></i> Escolha o Cenário</h1>
    <div class="menu-icons">
      <div class="menu-item" onclick="menuItemClick('story1')" aria-label="Iniciar cenário de golpe por email">
        <img src="assets/icons/whatsapp2.png" alt="Golpe do Email">
        <span>Whatsapp</span>
      </div>
      <div class="menu-item" onclick="menuItemClick('story2')" aria-label="Iniciar cenário de golpe por Instagram">
        <img src="assets/icons/instagram.png" alt="Golpe pelo Instagram">
        <span>Instagram</span>
      </div>
      <div class="menu-item" onclick="menuItemClick('story3')" aria-label="Iniciar cenário de golpe por TikTok">
        <img src="assets/icons/tiktok.png" alt="Golpe por TikTok">
        <span>TikTok</span>
      </div>
    </div>
  </div>

  <div id="scenario-container" style="display: none;">
    <div id="scenario-description"></div>
    <div id="image-container"></div>
    <div id="options"></div>
    <button id="restartBtn" style="display: none;" onclick="restartGame()" aria-label="Recomeçar o jogo">
      <i class="fas fa-redo"></i> Recomeçar
    </button>
  </div>

  <script>
    let menuClickSound, clickSound;
    try {
      menuClickSound = new Howl({
        src: ['assets/sounds/som7.mp3'],
        volume: 0.5,
        preload: true,
        onloaderror: () => console.warn('Erro')
      });
      clickSound = new Howl({
        src: ['assets/sounds/'],
        volume: 0.5,
        preload: true,
        onloaderror: () => console.warn('Erro')
      });
    } catch (e) {
      console.warn('Erro', e);
    }

    let currentStoryParts = {};
    let currentPart = "";
    let cumulativeScore = 0;

    const emailStoryParts = {
      "start": {
        text: "Uma mensagem no WhatsApp de um número desconhecido diz que você foi escolhido para participar de um programa de cursos, mostrando seu email e enviando um link. Qual é sua ação?",
        image: "assets/images/imagem_golpe.jpg",
        options: [
          { id: "ignoreBoth", text: "Ignorar a mensagem do WhatsApp", next: "ignore1", points: 1 },
          { id: "clickWhatsAppLink", text: "Clicar no link do WhatsApp", next: "click1", points: 0 },
          { id: "verifyEmail", text: "Verificar a caixa de entrada do seu email", next: "verify1", points: 2 }
        ]
      },
      "ignore1": {
        text: "Mesmo que tenha ignorado inicialmente, seu celular logo exibe uma notificação do gmail sobre atividades estranhas na sua conta. O que você faz?",
        image: "assets/images/imagem_notificacao.jpg",
        options: [
          { id: "continueIgnoring", text: "Continuar ignorando", next: "endIgnore", points: 0 },
          { id: "checkNotif", text: "Verificar a notificação", next: "ignore2", points: 1 },
          { id: "markPhishing", text: "Fechar a notificação", next: "ignore_report", points: 2 }
        ]
      },
      "ignore_report": {
        text: "Você fecha essa notifição, mas eles continuam chegando. Agora, sua escolha é:",
        image: "assets/images/imagem_notificacao2.jpg",
        options: [
          { id: "checkNotif", text: "Verificar historico de acesso", next: "ignore2", points: 1 },
          { id: "researchOnline", text: "Pesquisar informações online", next: "ignore_support", points: 1 },
          { id: "doNothing", text: "Não agir", next: "endIgnore", points: 0 }
        ]
      },
      "ignore2": {
        text: "Ao verificar, você ver varios emails em sequencia sobre Alerta de Segurança na sua conta. Você decide:",
        image: "assets/images/imagem_spam.jpg",
        options: [
          { id: "changePassword", text: "Alterar sua senha", next: "ignore3", points: 2 },
          { id: "seekHelp", text: "Buscar ajuda online", next: "ignore_support", points: 1 },
          { id: "doNothing", text: "Ignorar os alertas", next: "endIgnore2", points: 0 }
        ]
      },
      "ignore3": {
        text: "Após alterar sua senha, você percebe que não recebe mais notificação do email sobre alguém tentando invadir a conta. Agora para aumentar a segurança, você:",
        image: "assets/images/imagem_ativar.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "ignore4", points: 2 },
          { id: "monitorActivity", text: "Apenas monitora a atividade", next: "endMonitor", points: 1 },
          { id: "relax", text: "Confiar que já está protegido", next: "endRelax", points: 0 }
        ]
      },
      "ignore4": {
        text: "Com o 2FA ativo, sua segurança melhora. Para garantir a segurança dos seus dados, você decide:",
        image: "assets/images/imagem_senhaaf2.jpg",
        options: [
          { id: "backupData", text: "Realizar backup dos seus dados", next: "endBetterIgnore", points: 2 },
          { id: "consultExpert", text: "Buscar dicas na internet", next: "ignore_expert", points: 2 },
          { id: "doNothing", text: "Confiar somente no 2FA", next: "endModerateIgnore", points: 1 }
        ]
      },
      "ignore_expert": {
        text: "Análises online confirmam a tentativa de invasão, e suas medidas foram eficazes. Mantenha-se vigilante e atualize regularmente suas práticas de segurança para evitar golpes.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "ignore_support": {
        text: "Você buscou ajuda online e encontrou dicas valiosas para reforçar sua segurança. Sempre pesquise fontes confiáveis para proteger suas contas contra ameaças futuras.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endIgnore": {
        text: "Você ignorar o problema permitiu que invasores acessassem seus dados. Por isso, é crucial investigar e proteger sua conta ao receber alertas de segurança.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endIgnore2": {
        text: "Ignorar os alertas deixou sua conta vulnerável, resultando em invasão. Sempre verifique e proteja suas contas ao receber notificações de atividades suspeitas.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endMonitor": {
        text: "Você não ativou a verificação em duas etapas, deixando sua conta vulnerável a riscos futuros. Ative a autenticação de dois fatores para garantir maior segurança.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endRelax": {
        text: "Você não ativou a verificação em duas etapas, aumentando o risco de invasões futuras. Habilite a autenticação de dois fatores para proteger melhor sua conta.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endBetterIgnore": {
        text: "Parabéns! Com backups e medidas extras, você minimizou danos e protegeu seus dados. Sempre mantenha backups atualizados e adote práticas de segurança proativas.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endModerateIgnore": {
        text: "Suas medidas garantiram a segurança dos dados. Continue adotando práticas de segurança, como senhas fortes e monitoramento regular, para se proteger.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "click1": {
        text: "Clicar no link permitiu que os invasores roubassem seus dados. NUNCA CLIQUE EM LINKS DESCONHECIDOS.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "verify1": {
        text: "Notando que na mensagem tem o seu email, você vai checar a caixa de entrada, você percebe que podem esta tentando invadir sua conta. Qual é o seu próximo passo?",
        image: "assets/images/imagem_spam.jpg",
        options: [
          { id: "analyzeLinks", text: "Analisar todos manualmente com cuidado", next: "verify2", points: 2 },
          { id: "contactBank", text: "Excluir a conta", next: "endVerifyFreezeGood", points: 1 },
          { id: "deleteEmail", text: "Excluir todos os emails imediatamente", next: "endVerifyDelete", points: 0 }
        ]
      },
      "verify2": {
        text: "Analisando com cuidado, você descobre que todos são tentativas de golpe. Como proceder?",
        image: "assets/images/imagem_gmail.jpg",
        options: [
          { id: "checkForums", text: "Checar as configurações de segurança da conta", next: "verify2a", points: 2 },
          { id: "setAlert", text: "Configurar alertas de segurança", next: "verify2b", points: 1 },
          { id: "ignoreIssue", text: "Ignorar o problema", next: "endVerifyIgnore", points: 0 }
        ]
      },
      "verify2a": {
        text: "Você checa as configurações e percebe que houve tentativa de entrar na conta, mas nenhuma foi bem sucedida. O que fazer?",
        image: "assets/images/imagem_invasao.jpg",
        options: [
          { id: "changePassword", text: "Alterar sua senha", next: "verify2a1", points: 2 },
          { id: "activate2FA", text: "Ativar autenticação de dois fatores", next: "verify2a2", points: 2 },
          { id: "monitorClosely", text: "Monitorar a situação de perto", next: "endVerifyMonitor", points: 1 }
        ]
      },
      "verify2a1": {
        text: "Após alterar sua senha, a ameaça diminui. Agora, você decide:",
        image: "assets/images/imagem_ativar.jpg",
        options: [
          { id: "updateSoftware", text: "Ativar autenticação de dois fatores", next: "endVerifySoftUpdate", points: 2 },
          { id: "setAlert", text: "Configurar alertas de segurança", next: "endVerifySuspend", points: 1 },
          { id: "consultExpert", text: "Buscar dicas com um especialista", next: "endVerifyConsult", points: 2 }
        ]
      },
      "verify2a2": {
        text: "Ativar o 2FA bloqueia tentativas não autorizadas. Agora, você decide:",
        image: "assets/images/imagem_senhaaf2.jpg",
        options: [
          { id: "refreshSecurity", text: "Alterar sua senha", next: "endVerifyRefresh", points: 2 },
          { id: "setBackup", text: "Realizar backup dos seus dados", next: "endVerifyBackup", points: 1 },
          { id: "riskFurther", text: "Manter sem outras medidas", next: "endVerifyRisk", points: 0 }
        ]
      },
      "verify2b": {
        text: "Você configura alertas de segurança, mas a ameaça persiste. Qual o próximo passo?",
        image: "assets/images/imagem_invasao.jpg",
        options: [
          { id: "seekHelp", text: "Buscar informações em fóruns", next: "endVerifyCall", points: 1 },
          { id: "resetAccount", text: "Resetar sua conta", next: "endVerifyReset", points: 2 },
          { id: "ignoreSigns", text: "Ignorar os sinais", next: "endVerifyIgnore", points: 0 }
        ]
      },
      "endVerifyDelete": {
        text: "Excluir o email apenas mascarou os problemas, sua conta já estava sendo invadida, sem os devidos cuidados, os invasores conseguiram acessar seus dados.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endVerifyIgnore": {
        text: "Ignorar os sinais resultou no comprometimento da sua conta.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "endVerifyMonitor": {
        text: "Monitorar a situação ajudou, mas a invasão não foi totalmente contida.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifySoftUpdate": {
        text: "Atualizar sua senha e ativar a verificação de duas etapas fortaleceu sua segurança e eliminou a ameaça.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endVerifySuspend": {
        text: "Configurar alertas ajudou, mas sem outras medidas sua conta permaneceu vulnerável.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifyConsult": {
        text: "Consultar um especialista deixou sua conta muito mais segura.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endVerifyRefresh": {
        text: "Ativar a verificação de duas etapas e atualizar sua senha fortaleceu sua segurança e eliminou a ameaça.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "endVerifyBackup": {
        text: "Realizar backup salvou seus dados, mas a proteção ainda precisa ser aprimorada.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifyRisk": {
        text: "Manter a situação sem adotar outras medidas no futuro vai ser arriscado demais.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifyCall": {
        text: "Buscar informações em fóruns identificou os riscos, mas a ameaça persistiu.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifyReset": {
        text: "Resetar sua conta trouxe segurança temporária, mas causou transtornos.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "endVerifyFreezeGood": {
        text: "Excluir a conta pode não ser o melhor metodo de lidar com essa situação, mas no fim, da certo.",
        image: "assets/images/good_end.jpg",
        options: []
      }
    };

    const instagramStoryParts = {
      "start": {
        text: "Você recebe uma mensagem direta no Instagram de um perfil que parece ser do suporte oficial, alegando que sua conta será desativada a menos que você clique em um link para verificação. Como você reage?",
        image: "assets/images/imagem_instagram.jpg",
        options: [
          { id: "ignoreMessage", text: "Ignorar a mensagem", next: "i_ignore1", points: 1 },
          { id: "clickLink", text: "Responder a mensagem", next: "i_click1", points: 0 },
          { id: "verifyProfile", text: "Verificar o perfil que enviou a mensagem", next: "i_verify1", points: 2 }
        ]
      },
      "i_ignore1": {
        text: "Você ignora a mensagem, mas recebe uma notificação de tentativa de login na sua conta. O que fazer?",
        image: "assets/images/imagem_celular.jpg",
        options: [
          { id: "checkNotif", text: "Verificar a notificação", next: "i_ignore2", points: 1 },
          { id: "reportProfile", text: "Reportar o perfil como spam", next: "i_ignore_report", points: 2 },
          { id: "doNothing", text: "Continuar ignorando", next: "i_endIgnore", points: 0 }
        ]
      },
      "i_ignore_report": {
        text: "Você reporta o perfil, mas as notificações de segurança continuam. Sua escolha é:",
        image: "assets/images/imagem_spam.jpg",
        options: [
          { id: "checkNotif", text: "Verificar as configurações de segurança", next: "i_ignore2", points: 1 },
          { id: "researchOnline", text: "Pesquisar sobre golpes no Instagram", next: "i_ignore_support", points: 1 },
          { id: "doNothing", text: "Não agir", next: "i_endIgnore", points: 0 }
        ]
      },
      "i_ignore2": {
        text: "Ao verificar, você nota tentativas de login não autorizadas. Você decide:",
        image: "assets/images/imagem_invasao.jpg",
        options: [
          { id: "changePassword", text: "Alterar sua senha", next: "i_ignore3", points: 2 },
          { id: "seekHelp", text: "Buscar ajuda online", next: "i_ignore_support", points: 1 },
          { id: "ignoreAlerts", text: "Ignorar os alertas", next: "i_endIgnore2", points: 0 }
        ]
      },
      "i_ignore3": {
        text: "Após alterar sua senha, você ainda se sente inseguro. O que fazer?",
        image: "assets/images/imagem_ativar.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "i_ignore4", points: 2 },
          { id: "backupData", text: "Realizar backup dos seus dados", next: "i_endBetterIgnore", points: 2 },
          { id: "doNothing", text: "Confiar que está seguro", next: "i_endModerateIgnore", points: 1 }
        ]
      },
      "i_ignore4": {
        text: "Com o 2FA ativo, sua conta está mais protegida.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "i_ignore_support": {
        text: "Você encontra informações sobre golpes semelhantes e adota medidas básicas de proteção.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "i_endIgnore": {
        text: "Ignorar as notificações permitiu que invasores tentassem acessar sua conta.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "i_endIgnore2": {
        text: "Ignorar os alertas deixou sua conta vulnerável a invasões.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "i_endBetterIgnore": {
        text: "Com backup e senhas atualizadas, sua conta está segura.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "i_endModerateIgnore": {
        text: "Algumas medidas ajudaram, mas não foram suficientes para total segurança.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "i_click1": {
        text: "Você responde a mensagem. Qual sua ação?",
        image: "assets/images/imagem_instagramchat.jpg",
        options: [
          { id: "restartDevice", text: "Reiniciar o dispositivo", next: "i_click2", points: 0 },
          { id: "installAntivirus", text: "Instalar e rodar um antivírus", next: "i_click3", points: 1 },
          { id: "disconnectNet", text: "Desconectar da internet", next: "i_click4", points: 2 }
        ]
      },
      "i_click2": {
        text: "Reiniciar o dispositivo não resolveu, e a invasão piorou.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "i_click3": {
        text: "O antivírus removeu algumas ameaças, mas problemas persistem.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "i_click4": {
        text: "Desconectar da internet limitou os danos, mas a ameaça não foi eliminada.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "i_verify1": {
        text: "Você verifica o perfil e nota que ele é falso, com poucos seguidores e sem verificação. Como proceder?",
        image: "assets/images/imagem_perfil.jpg",
        options: [
          { id: "reportAndBlock", text: "Reportar e bloquear o perfil", next: "i_verify2", points: 2 },
          { id: "checkSettings", text: "Verificar configurações de segurança da conta", next: "i_verify3", points: 1 },
          { id: "ignore", text: "Ignorar a mensagem", next: "i_endIgnore", points: 0 }
        ]
      },
      "i_verify2": {
        text: "Reportar e bloquear o perfil evitou o golpe. Sua conta está segura.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "i_verify3": {
        text: "Você verifica as configurações e reforça a segurança, mas ainda precisa agir. O que fazer?",
        image: "assets/images/imagem_ativar.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "i_ignore4", points: 2 },
          { id: "consultExpert", text: "Consultar dicas online", next: "i_ignore_support", points: 1 },
          { id: "doNothing", text: "Confiar nas medidas tomadas", next: "i_endModerateIgnore", points: 1 }
        ]
      }
    };

    const tiktokStoryParts = {
      "start": {
        text: "Você recebe uma mensagem direta no TikTok de um perfil oferecendo uma 'parceria' para promover um produto, pedindo que você clique em um link para se cadastrar. Como você reage?",
        image: "assets/images/imagem_tiktok.jpg",
        options: [
          { id: "ignoreMessage", text: "Ignorar a mensagem", next: "t_ignore1", points: 1 },
          { id: "clickLink", text: "Clicar no link", next: "t_click1", points: 0 },
          { id: "verifyProfile", text: "Verificar o perfil que enviou a mensagem", next: "t_verify1", points: 2 }
        ]
      },
      "t_ignore1": {
        text: "Você ignora a mensagem, mas recebe uma notificação de tentativa de login na sua conta. O que fazer?",
        image: "assets/images/imagem_celular.jpg",
        options: [
          { id: "checkNotif", text: "Verificar a notificação", next: "t_ignore2", points: 1 },
          { id: "reportProfile", text: "Reportar o perfil como spam", next: "t_ignore_report", points: 2 },
          { id: "doNothing", text: "Continuar ignorando", next: "t_endIgnore", points: 0 }
        ]
      },
      "t_ignore_report": {
        text: "Você reporta o perfil, mas as notificações de segurança continuam. Sua escolha é:",
        image: "assets/images/imagem_spam.jpg",
        options: [
          { id: "checkNotif", text: "Verificar as configurações de segurança", next: "t_ignore2", points: 1 },
          { id: "researchOnline", text: "Pesquisar sobre golpes no TikTok", next: "t_ignore_support", points: 1 },
          { id: "doNothing", text: "Não agir", next: "t_endIgnore", points: 0 }
        ]
      },
      "t_ignore2": {
        text: "Ao verificar, você nota tentativas de login não autorizadas. Você decide:",
        image: "assets/images/imagem_invasao.jpg",
        options: [
          { id: "changePassword", text: "Alterar sua senha", next: "t_ignore3", points: 2 },
          { id: "seekHelp", text: "Buscar ajuda online", next: "t_ignore_support", points: 1 },
          { id: "ignoreAlerts", text: "Ignorar os alertas", next: "t_endIgnore2", points: 0 }
        ]
      },
      "t_ignore3": {
        text: "Após alterar sua senha, você ainda se sente inseguro. O que fazer?",
        image: "assets/images/imagem_ativar.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "t_ignore4", points: 2 },
          { id: "backupData", text: "Realizar backup dos seus dados", next: "t_endBetterIgnore", points: 2 },
          { id: "doNothing", text: "Confiar que está seguro", next: "t_endModerateIgnore", points: 1 }
        ]
      },
      "t_ignore4": {
        text: "Com o 2FA ativo, sua conta está mais protegida.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "t_ignore_support": {
        text: "Você encontra informações sobre golpes semelhantes e adota medidas básicas de proteção.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "t_endIgnore": {
        text: "Ignorar as notificações permitiu que invasores tentassem acessar sua conta.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_endIgnore2": {
        text: "Ignorar os alertas deixou sua conta vulnerável a invasões.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_endBetterIgnore": {
        text: "Com backup e senhas atualizadas, sua conta está segura.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "t_endModerateIgnore": {
        text: "Algumas medidas ajudaram, mas não foram suficientes para total segurança.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "t_click1": {
        text: "Após clicar no link, seu dispositivo fica lento e exibe mensagens suspeitas. Qual sua ação?",
        image: "assets/images/imagem_error.jpg",
        options: [
          { id: "restartDevice", text: "Reiniciar o dispositivo", next: "t_click2", points: 0 },
          { id: "installAntivirus", text: "Instalar e rodar um antivírus", next: "t_click3", points: 1 },
          { id: "disconnectNet", text: "Desconectar da internet", next: "t_click4", points: 2 }
        ]
      },
      "t_click2": {
        text: "Reiniciar o dispositivo não resolveu, e a invasão piorou.",
        image: "assets/images/bad_end.jpg",
        options: []
      },
      "t_click3": {
        text: "O antivírus removeu algumas ameaças, mas problemas persistem.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "t_click4": {
        text: "Desconectar da internet limitou os danos, mas a ameaça não foi eliminada.",
        image: "assets/images/medium_end.jpg",
        options: []
      },
      "t_verify1": {
        text: "Você verifica o perfil e nota que ele é falso, com poucos seguidores e sem verificação. Como proceder?",
        image: "assets/images/teste.png",
        options: [
          { id: "reportAndBlock", text: "Reportar e bloquear o perfil", next: "t_verify2", points: 2 },
          { id: "checkSettings", text: "Verificar configurações de segurança da conta", next: "t_verify3", points: 1 },
          { id: "ignore", text: "Ignorar a mensagem", next: "t_endIgnore", points: 0 }
        ]
      },
      "t_verify2": {
        text: "Reportar e bloquear o perfil evitou o golpe. Sua conta está segura.",
        image: "assets/images/good_end.jpg",
        options: []
      },
      "t_verify3": {
        text: "Você verifica as configurações e reforça a segurança, mas ainda precisa agir. O que fazer?",
        image: "assets/images/imagem_ativar.jpg",
        options: [
          { id: "enable2FA", text: "Ativar autenticação de dois fatores", next: "t_ignore4", points: 2 },
          { id: "consultExpert", text: "Consultar dicas online", next: "t_ignore_support", points: 1 },
          { id: "doNothing", text: "Confiar nas medidas tomadas", next: "t_endModerateIgnore", points: 1 }
        ]
      }
    };

    function menuItemClick(storyKey) {
      if (menuClickSound) menuClickSound.play();
      startStory(storyKey);
    }

    function startStory(storyKey) {
      cumulativeScore = 0;
      currentPart = "start";
      if (storyKey === "story1") {
        currentStoryParts = emailStoryParts;
      } else if (storyKey === "story2") {
        currentStoryParts = instagramStoryParts;
      } else if (storyKey === "story3") {
        currentStoryParts = tiktokStoryParts;
      } else {
        console.warn('Cenário inválido selecionado:', storyKey);
        return;
      }
      document.getElementById("menu-container").style.display = "none";
      document.getElementById("scenario-container").style.display = "block";
      loadPart();
    }

    function loadPart() {
      const part = currentStoryParts[currentPart];
      if (!part) {
        console.warn('Parte do cenário não encontrada:', currentPart);
        document.getElementById("scenario-description").innerHTML = "<p>Erro: Cenário não encontrado.</p>";
        document.getElementById("image-container").innerHTML = "";
        document.getElementById("options").innerHTML = "";
        document.getElementById("restartBtn").style.display = "block";
        return;
      }
      document.getElementById("scenario-description").innerHTML = `<p>${part.text}</p>`;
      document.getElementById("image-container").innerHTML = part.image 
        ? `<img src="${part.image}" alt="Imagem do cenário" onerror="this.src='assets/images/medium_end.jpg'">`
        : "";
      const optionsContainer = document.getElementById("options");
      optionsContainer.innerHTML = "";
      if (part.options.length === 0) {
        document.getElementById("restartBtn").style.display = "block";
      } else {
        document.getElementById("restartBtn").style.display = "none";
        part.options.forEach(option => {
          let btn = document.createElement("button");
          btn.className = "option";
          btn.innerText = option.text;
          btn.setAttribute("aria-label", `Opção: ${option.text}`);
          btn.addEventListener("click", function() {
            if (clickSound) clickSound.play();
            cumulativeScore += option.points;
            currentPart = option.next;
            loadPart();
          });
          optionsContainer.appendChild(btn);
        });
      }
    }

    function restartGame() {
      if (clickSound) clickSound.play();
      document.getElementById("scenario-container").style.display = "none";
      document.getElementById("menu-container").style.display = "block";
      document.getElementById("scenario-description").innerHTML = "";
      cumulativeScore = 0;
      currentPart = "";
      currentStoryParts = {};
    }
  </script>
</body>
</html>
